<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tagsy 仪表盘</title>
    <script src="../Lib/Tail_Wind/Tail_Wind.js"></script>
    <link rel="stylesheet" href="../Lib/Font_Awesome/All.css">
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
    <div id="app" class="flex min-h-screen">
        <div id="sidebar_container"></div>
        <div class="flex-1 flex flex-col">
            <div id="header_container"></div>
            <main id="main_area" class="flex-1 p-6 mt-16 mb-16 relative">
                <!-- 页面内容写这里 -->
            </main>
            <div id="footer_container"></div>
        </div>
    </div>
	<!-- <script src="main.js"></script> -->
    <script>
		function loadComponent(containerId, url) {
			return fetch(url)
				.then(res => res.text())
				.then(html => {
					document.getElementById(containerId).innerHTML = html;
				})
				.catch(err => console.error(`加载 ${url} 失败`, err));
		}

		function highlightCurrentMenu() {
			// 取出当前页面文件名
			const path = location.pathname.split('/').pop(); // "Setting.html"

			// 遍历侧边栏所有链接
			const links = document.querySelectorAll('#sidebar_menu a');
			links.forEach(link => {
				// 移除之前的高亮
				link.classList.remove('text-blue-600', 'font-semibold', 'bg-blue-100');

				// 如果 href 匹配当前页面，则加高亮
				const href = link.getAttribute('href');
				if (href === path) {
					link.classList.add('text-blue-600', 'font-semibold', 'bg-blue-100');
				}
			});
		}

		// 动态加载完成后调用
		Promise.all([
			loadComponent('sidebar_container', 'sidebar.html'),
			loadComponent('header_container', 'header.html'),
			loadComponent('footer_container', 'footer.html')
		]).then(() => {
			console.log('布局加载完成');
			highlightCurrentMenu();
		});
	</script>
</body>
</html>